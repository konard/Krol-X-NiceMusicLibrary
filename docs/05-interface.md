# Дизайн интерфейса

**Проект:** NiceMusicLibrary
**Версия документа:** 1.0
**Дата:** 2025-01

---

## Принципы дизайна

### Основные ценности

| Принцип | Описание |
|---------|----------|
| Простота | Минимум кликов для основных действий, интуитивная навигация |
| Фокус на музыке | Интерфейс не отвлекает от прослушивания, плеер всегда доступен |
| Адаптивность | Одинаково удобен на десктопе, планшете и мобильном |
| Быстрый доступ | Горячие клавиши, быстрые действия, минимум модальных окон |
| Визуальная иерархия | Обложки альбомов как главный визуальный элемент |

### Доступность (Accessibility)

- Контрастность текста WCAG AA
- Поддержка клавиатурной навигации
- Screen reader friendly
- Настраиваемые размеры шрифтов

---

## Цветовая схема

### Светлая тема

```yaml
light_theme:
  background:
    primary: "#FFFFFF"
    secondary: "#F5F5F7"
    tertiary: "#E8E8ED"
  text:
    primary: "#1D1D1F"
    secondary: "#6E6E73"
    muted: "#86868B"
  accent:
    primary: "#007AFF"
    secondary: "#5856D6"
    success: "#34C759"
    warning: "#FF9500"
    error: "#FF3B30"
  player:
    background: "#FFFFFF"
    progress_bar: "#007AFF"
    progress_track: "#E8E8ED"
```

### Тёмная тема

```yaml
dark_theme:
  background:
    primary: "#1C1C1E"
    secondary: "#2C2C2E"
    tertiary: "#3A3A3C"
  text:
    primary: "#FFFFFF"
    secondary: "#ABABAB"
    muted: "#636366"
  accent:
    primary: "#0A84FF"
    secondary: "#5E5CE6"
    success: "#30D158"
    warning: "#FF9F0A"
    error: "#FF453A"
  player:
    background: "#2C2C2E"
    progress_bar: "#0A84FF"
    progress_track: "#3A3A3C"
```

---

## Типографика

### Шрифты

| Тип | Семейство |
|-----|-----------|
| Основной | Inter, -apple-system, BlinkMacSystemFont, sans-serif |
| Моноширинный | SF Mono, Monaco, monospace |

### Шкала размеров

| Элемент | Размер | Вес | Межстрочный интервал |
|---------|--------|-----|---------------------|
| H1 | 32px | 700 | 1.2 |
| H2 | 24px | 600 | 1.3 |
| H3 | 20px | 600 | 1.4 |
| Body | 16px | 400 | 1.5 |
| Small | 14px | 400 | 1.4 |
| Caption | 12px | 400 | 1.4 |

---

## Компоненты интерфейса

### Навигация (Sidebar)

**Тип:** Боковая панель
**Позиция:** Левая сторона

| Параметр | Значение |
|----------|----------|
| Ширина (свёрнуто) | 72px |
| Ширина (развёрнуто) | 260px |

#### Секции навигации

**Основное:**
- Главная (`/`)
- Поиск (`/search`)
- Библиотека (`/library`)

**Моя музыка:**
- Избранное (`/favorites`)
- Недавние (`/recent`)
- Статистика (`/stats`)

**Плейлисты:**
- Создать плейлист (действие)
- Динамический список плейлистов

**Цепочки настроений:**
- Мои цепочки (`/mood-chains`)
- Создать из истории (действие)

**Подвал:**
- Настройки (`/settings`)
- Профиль (`/profile`)

### Плеер

**Позиция:** Нижняя часть экрана
**Высота:** 90px

#### Структура плеера

| Секция | Ширина | Содержимое |
|--------|--------|------------|
| Левая | 30% | Обложка (56px), информация о треке, кнопка избранного |
| Центр | 40% | Кнопки управления, прогресс-бар с таймкодами |
| Правая | 30% | Громкость, кнопка очереди, полноэкранный режим |

#### Кнопки управления

- Shuffle (переключатель)
- Назад
- Play/Pause (большая)
- Вперёд
- Repeat (off / all / one)

#### Мини-плеер (мобильные устройства)

**Высота:** 64px
**Содержимое:** Обложка, информация о треке, play/pause, кнопка разворачивания
**Жест:** Свайп вверх для полноэкранного режима

#### Полноэкранный плеер

- Фон: размытая обложка
- Большая обложка: min(60vw, 400px) с тенью
- Информация о треке: название 24px, исполнитель 18px
- Прогресс-бар: 6px высота
- Увеличенные кнопки управления
- Текст песни (опционально, с прокруткой)

### Карточка трека

#### Вариант: Строка списка

**Высота:** 56px

| Элемент | Ширина | Описание |
|---------|--------|----------|
| Позиция | 32px | Показывает play при наведении |
| Обложка | 40px | Миниатюра альбома |
| Информация | flex: 1 | Название и исполнитель/альбом |
| Длительность | 50px | Формат MM:SS |
| Действия | auto | Появляются при наведении |

**Действия при наведении:**
- Добавить в очередь
- Добавить в плейлист
- Дополнительное меню

#### Вариант: Сетка

**Ширина:** 180px

- Обложка: 180px, кнопка play при наведении
- Название: 1 строка
- Исполнитель: 1 строка, вторичный цвет

#### Вариант: Компактный

**Высота:** 48px
**Использование:** Для очереди и рекомендаций

### Поиск

#### Глобальный поиск

**Триггер:** Ctrl+K / Cmd+K
**Тип:** Command palette
**Позиция:** Центр сверху
**Ширина:** 600px

**Возможности:**
- Мгновенные результаты
- Категории: песни, исполнители, альбомы, плейлисты
- История поиска
- Клавиатурная навигация

#### Фильтры библиотеки

**Позиция:** Верх области контента
**Расположение:** Горизонтальное

| Фильтр | Тип | Описание |
|--------|-----|----------|
| Жанр | Dropdown | Множественный выбор |
| Год | Dropdown | Диапазон |
| Рейтинг | Dropdown | 1+, 2+, 3+, 4+, 5 |
| Только избранные | Toggle | Вкл/выкл |
| Поиск | Текст | Название, исполнитель... |

**Сортировка:**
- По названию
- По исполнителю
- По дате добавления
- По популярности
- По последнему прослушиванию

---

## Страницы

### Главная (/)

#### Структура

**Приветствие:**
- «Добрый день, {username}»
- «Что послушаем сегодня?»

**Секции:**

| Секция | Тип | Количество |
|--------|-----|------------|
| Недавно слушали | Карусель сетки | 6 элементов |
| Ваши плейлисты | Карусель карточек | - |
| Цепочки настроений | Карусель карточек | - |
| Вы давно не слушали | Список | 5 элементов |

### Библиотека (/library)

#### Заголовок

- Название: «Библиотека»
- Подзаголовок: «{song_count} треков»
- Действия: Загрузить, Переключатель вида (список/сетка)

#### Содержимое

**Режим списка — Колонки:**
- #
- Название
- Исполнитель
- Альбом
- Дата
- Длительность

Колонки с сортировкой.

**Режим сетки:**
- Ширина элемента: 180px
- Отступ: 24px

### Плейлист (/playlist/{id})

#### Заголовок (Hero)

- Обложка: 232px, редактируемая
- Название: редактируемое, 32px
- Описание: редактируемое
- Мета: «{song_count} треков», «{total_duration}»
- Действия: Воспроизвести (primary), Shuffle, Меню (редактировать, поделиться, удалить)

#### Содержимое

- Тип: Список треков
- Drag-and-drop для изменения порядка
- Колонки: #, Название, Исполнитель, Альбом, Дата добавления, Длительность

### Цепочка настроений (/mood-chain/{id})

#### Заголовок

Аналогично плейлисту, плюс:
- Теги настроения (chips, редактируемые)
- Стиль перехода (dropdown)

#### Содержимое

**Режим списка — Колонки:**
- Позиция
- Название
- Исполнитель
- Переход →
- Длительность

**Режим графа:**
- Визуальный граф связей
- Размер узла пропорционален количеству воспроизведений
- Толщина связи = вес перехода
- Интерактивный

#### Режим воспроизведения

- Предложения следующего трека: справа внизу, 3 варианта
- Показывается оценка совместимости
- Автовыбор через 10 секунд
- Подсветка текущего трека
- Плавный crossfade

### Статистика (/stats)

#### Заголовок

- Название: «Ваша статистика»
- Селектор периода: Неделя, Месяц, Год, Всё время (по умолчанию: Месяц)

#### Виджеты

| Виджет | Тип | Содержимое |
|--------|-----|------------|
| Время прослушивания | Карточка | {total_hours} ч, изменение в % |
| Треков прослушано | Карточка | {total_plays} |
| Уникальных треков | Карточка | {unique_tracks} |
| Топ треков | Список | 10 элементов с play_count |
| Топ исполнителей | Список | 10 элементов |
| По жанрам | Круговая диаграмма | Распределение |
| Активность | Линейный график | По дням |
| Когда вы слушаете | Тепловая карта | Часы × Дни недели |

### Настройки (/settings)

#### Секции

**Внешний вид:**
- Тема: Светлая / Тёмная / Системная
- Язык: Русский / English

**Воспроизведение:**
- Кроссфейд: 0-12 сек (слайдер)
- Качество: Низкое / Среднее / Высокое / Оригинал
- Показывать текст: Вкл/выкл

**Хранилище:**
- Использовано: {used_gb} / {total_gb} ГБ
- Очистить кэш (кнопка)

---

## Адаптивность

### Брейкпоинты

| Устройство | Размер экрана |
|------------|---------------|
| Mobile | < 768px |
| Tablet | 768px - 1024px |
| Desktop | > 1024px |

### Мобильные устройства

**Навигация:** Нижняя панель вкладок
- Главная
- Поиск
- Библиотека
- Профиль

**Плеер:** Мини-плеер, свайп вверх для полноэкранного

**Библиотека:** Только список, колонки: обложка, информация, длительность

### Планшеты

**Навигация:** Боковая панель, свёрнута по умолчанию, разворачивается при наведении

**Библиотека:** Сетка 4 колонки

### Десктоп

**Навигация:** Боковая панель развёрнута

**Библиотека:** Сетка 6 колонок

**Плеер:** Показывает панель очереди

---

## Интерактивные элементы

### Drag-and-Drop

| Действие | Элемент | Визуальная обратная связь |
|----------|---------|---------------------------|
| Загрузка файлов | Любое место | Оверлей |
| Изменение порядка в плейлисте | Строка трека | Ghost-элемент |
| Добавление в плейлист | Трек | Подсветка плейлиста в sidebar |

### Контекстные меню

**Меню трека:**
- Воспроизвести
- Добавить в очередь
- ---
- Добавить в плейлист
- Добавить в цепочку
- ---
- Перейти к исполнителю
- Перейти к альбому
- ---
- Редактировать теги
- Редактировать метаданные
- ---
- Удалить

### Горячие клавиши

| Клавиша | Действие |
|---------|----------|
| Space | Play/Pause |
| Ctrl+K / Cmd+K | Открыть поиск |
| ← | Перемотка назад 10 сек |
| → | Перемотка вперёд 10 сек |
| ↑ | Громкость + |
| ↓ | Громкость - |
| M | Mute |
| S | Toggle Shuffle |
| R | Toggle Repeat |
| L | Лайк текущего трека |
| Q | Toggle очередь |

---

## Анимации

### Принципы

- Быстрые (200-300ms)
- Не блокирующие взаимодействие
- Уменьшение motion для accessibility (prefers-reduced-motion)

### Примеры

| Элемент | Тип | Длительность | Параметры |
|---------|-----|--------------|-----------|
| Переход страницы | fade + slide | 200ms | ease-out |
| Открытие модального окна | scale + fade | 250ms | from: scale(0.95) |
| Наведение на трек | background_color | 150ms | - |
| Пульс кнопки play | scale | 200ms | при нажатии |

---

## ASCII-наброски интерфейса

### Основной макет

```
┌─────────────────────────────────────────────────────────────────────┐
│ ┌─────────┐ ┌─────────────────────────────────────────────────────┐ │
│ │         │ │                                                     │ │
│ │  LOGO   │ │              H E A D E R                            │ │
│ │         │ │                           [Search] [Profile]        │ │
│ ├─────────┤ ├─────────────────────────────────────────────────────┤ │
│ │         │ │                                                     │ │
│ │ Главная │ │                                                     │ │
│ │ Поиск   │ │                                                     │ │
│ │Библиотек│ │                                                     │ │
│ │         │ │               M A I N   C O N T E N T               │ │
│ │─────────│ │                                                     │ │
│ │ Избранн.│ │                                                     │ │
│ │ Недавние│ │                                                     │ │
│ │Статистик│ │                                                     │ │
│ │         │ │                                                     │ │
│ │─────────│ │                                                     │ │
│ │Плейлисты│ │                                                     │ │
│ │ + Новый │ │                                                     │ │
│ │ ▸ Work  │ │                                                     │ │
│ │ ▸ Chill │ │                                                     │ │
│ │         │ │                                                     │ │
│ └─────────┘ └─────────────────────────────────────────────────────┘ │
│ ┌─────────────────────────────────────────────────────────────────┐ │
│ │ [Обложка]  Song Title          ◀◀  ▶  ▶▶       ═══●═══  🔊  ☰  │ │
│ │            Artist Name         0:00 ───●────── 3:45             │ │
│ └─────────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────┘
```

### Конструктор цепочки настроений

```
┌─────────────────────────────────────────────────────────────────────┐
│  Конструктор цепочки настроений                                    │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  Название: [Вечерний чилл________________]                         │
│                                                                     │
│  Теги: [chill] [relaxing] [evening] [+]                            │
│                                                                     │
│  Стиль переходов: [Плавный ▼]                                      │
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                                                             │   │
│  │    ┌─────┐   ──95%──>   ┌─────┐   ──87%──>   ┌─────┐       │   │
│  │    │Song1│              │Song2│              │Song3│       │   │
│  │    │     │              │     │              │     │       │   │
│  │    └─────┘              └─────┘              └─────┘       │   │
│  │                                                             │   │
│  │              ┌─────┐              ┌─────┐                   │   │
│  │       <──92%─│Song4│──78%──>      │ + ? │                   │   │
│  │              │     │              │     │                   │   │
│  │              └─────┘              └─────┘                   │   │
│  │                                                             │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  Добавить трек: [Поиск треков...________________]                  │
│                                                                     │
│                          [Отмена]  [Сохранить]                     │
└─────────────────────────────────────────────────────────────────────┘
```

### Предложения следующего трека

```
┌─────────────────────────────────────────────────────────────────────┐
│                                                                     │
│     Сейчас играет: "Chill Song" - Artist                           │
│     ═══════════════════════●══  2:45 / 3:30                        │
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │  Следующий трек:                                   ⏱ 10 сек │   │
│  │                                                             │   │
│  │  ┌──────────────────┐  ┌──────────────────┐  ┌────────────┐│   │
│  │  │ Recommendation 1 │  │ Recommendation 2 │  │ Rec 3      ││   │
│  │  │    "Song Name"   │  │    "Song Name"   │  │ "Song"     ││   │
│  │  │    Artist        │  │    Artist        │  │ Artist     ││   │
│  │  │    ━━━━━━━━━━    │  │    ━━━━━━━━      │  │ ━━━━━━━    ││   │
│  │  │    95% match     │  │    87% match     │  │ 82%        ││   │
│  │  │ "Похожий темп"   │  │ "Тот же жанр"    │  │ "Часто     ││   │
│  │  │                  │  │                  │  │  после"    ││   │
│  │  │     [Выбрать]    │  │     [Выбрать]    │  │ [Выбрать]  ││   │
│  │  └──────────────────┘  └──────────────────┘  └────────────┘│   │
│  │                                                             │   │
│  │                    [Авто-выбор через 10 сек]                │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### Дашборд статистики

```
┌─────────────────────────────────────────────────────────────────────┐
│  Ваша статистика                              [Неделя ▼] [Месяц]   │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐        │
│  │  ⏱ 48 часов    │  │  ▶ 1,234       │  │  🎵 456        │        │
│  │  Прослушано    │  │  Треков        │  │  Уникальных    │        │
│  │  +12% ↑        │  │  прослушано    │  │  треков        │        │
│  └────────────────┘  └────────────────┘  └────────────────┘        │
│                                                                     │
│  ┌──────────────────────────────┐  ┌──────────────────────────┐   │
│  │  Топ треков                  │  │  По жанрам               │   │
│  │  ─────────────────           │  │    ┌─────────┐           │   │
│  │  1. Song Name        42 plays│  │   /    Rock   \          │   │
│  │  2. Another Song     38 plays│  │  │   45%       │         │   │
│  │  3. Third Song       35 plays│  │  │ Pop │ Jazz │          │   │
│  │  4. ...              ...     │  │  │ 30% │ 15%  │          │   │
│  │  5. ...              ...     │  │   \   Other  /           │   │
│  │                              │  │    └─────────┘           │   │
│  └──────────────────────────────┘  └──────────────────────────┘   │
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │  Активность по дням                                         │   │
│  │  ▂ ▄ ▆ █ ▄ ▂ ▃ ▅ ▇ █ ▆ ▄ ▂ ▃ ▅ ▇ █ ▅ ▃ ▂ ▄ ▆ █ ▇ ▅ ▃ ▂ ▄ │   │
│  │  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 ...      │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## Технологический стек фронтенда

| Технология | Назначение |
|------------|------------|
| Vue.js 3 | Основной фреймворк |
| TypeScript | Типизация |
| Pinia | Управление состоянием |
| Vue Router | Маршрутизация |
| Tailwind CSS | Стилизация |
| Vite | Сборка |
| Vitest | Тестирование |
| Vue Test Utils | Тестирование компонентов |
